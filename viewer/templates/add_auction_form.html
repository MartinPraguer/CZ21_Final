{% extends "base.html" %}
{% load static %}
{% load my_filters %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">

<h2>Stránka pro vytvoření nové aukce</h2>

<!-- Upozornění pro nepřihlášené uživatele -->
{% if not user_authenticated %}
    <div style="color: red; font-weight: bold; border: 1px solid red; padding: 10px; background-color: #ffdddd;">
        You cannot add an auction, you are not logged in.
    </div>
{% endif %}

<!-- Formulář pro přihlášené uživatele -->
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="file" name="images" multiple>
    <button type="submit">Create Auction</button>
</form>

<!-- Zpráva pro nepřihlášené uživatele -->
{% if not user_authenticated %}
    <p><a href="{% url 'login' %}?next={{ request.path }}" style="color: blue; text-decoration: underline;">Please log in to create an auction</a></p>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const auctionTypeField = document.getElementById('id_auction_type');
    const buyNowPriceField = document.getElementById('id_buy_now_price').parentElement;
    const startPriceField = document.getElementById('id_start_price').parentElement;
    const minimumBidField = document.getElementById('id_minimum_bid').parentElement;

    function toggleFields() {
      if (auctionTypeField.value === 'buy_now') {
        buyNowPriceField.style.display = 'block';   // Zobrazit "Buy Now" cenu
        startPriceField.style.display = 'none';     // Skrýt pole pro příhozy
        minimumBidField.style.display = 'none';
      } else {
        buyNowPriceField.style.display = 'none';    // Skrýt "Buy Now" cenu
        startPriceField.style.display = 'block';    // Zobrazit pole pro příhozy
        minimumBidField.style.display = 'block';
      }
    }

    auctionTypeField.addEventListener('change', toggleFields);
    toggleFields();  // Spustí se při načtení stránky a nastaví pole podle výběru
  });
</script>


{% endblock %}



